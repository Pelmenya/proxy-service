# proxy-service

### Клонируйте репозиторий
```bash
git clone https://github.com/Pelmenya/proxy-service.git
```
### Запуск 
```bash
docker-compose up --build
```
### Защита VDS
Защита вашего виртуального выделенного сервера (VDS) с запущенным контейнером 3proxy включает несколько уровней безопасности. 
Вот пошаговое руководство по настройке базовой безопасности:

1. Обновление системы
Перед тем как приступить к настройке, убедитесь, что ваш сервер и все пакеты обновлены:
```bash
apt-get update && sudo apt-get upgrade -y
```

2. Настройка брандмауэра (UFW)
UFW (Uncomplicated Firewall) — простой и удобный инструмент для управления брандмауэром на Ubuntu.
Установите UFW, если он еще не установлен:
```bash
apt-get install ufw -y
```

Разрешите только необходимые порты:
Например, разрешите SSH (обычно порт 22) и порт, на котором работает ваш прокси (1080):
```bash
sudo ufw allow 22
sudo ufw allow 1080
```
Если вы используете нестандартный порт для SSH, укажите его.

Запретите все входящие соединения по умолчанию:
```bash
sudo ufw default deny incoming
sudo ufw default allow outgoing
```

Включите UFW:
```bash
sudo ufw enable
```

Проверьте статус UFW:
```bash
sudo ufw status
```

3. Ограничение доступа к контейнеру
Убедитесь, что Docker контейнер настроен для прослушивания только на нужных интерфейсах. По умолчанию Docker привязывается ко всем сетевым интерфейсам.

4. Настройка SSH
Измените порт SSH:
Измените порт SSH на нестандартный, чтобы уменьшить количество попыток взлома. Откройте /etc/ssh/sshd_config и измените строку:
```
textPort 22
``` 
на другой номер порта, например:
```
textPort 2222
```
Затем перезапустите SSH:
```bash
sudo systemctl restart ssh
```

Отключите вход по паролю и используйте ключи SSH:
В файле /etc/ssh/sshd_config установите:
```
textPasswordAuthentication no
```
Настройте вход по ключам SSH, следуя документации.

5. Настройка Fail2Ban
Fail2Ban — это инструмент, который защищает сервер от грубых атак, блокируя IP-адреса после нескольких неудачных попыток входа.

Установите Fail2Ban:
```bash
sudo apt-get install fail2ban -y
```

Создайте локальную копию конфигурационного файла:
```bash
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
```
Настройте Fail2Ban:
Откройте /etc/fail2ban/jail.local и настройте параметры, такие как bantime, findtime, и maxretry для sshd.

Перезапустите Fail2Ban:
```bash
sudo systemctl restart fail2ban
```

6. Регулярные обновления и мониторинг

Настройте автоматическое обновление безопасности:
Установите unattended-upgrades, чтобы автоматически устанавливать обновления безопасности:
```bash
sudo apt-get install unattended-upgrades -y
```
Затем настройте его в /etc/apt/apt.conf.d/50unattended-upgrades.

Мониторьте логи и активность:
Регулярно проверяйте логи вашего сервера и контейнеров для выявления подозрительной активности.

Эти шаги помогут защитить ваш сервер и контейнер от несанкционированного доступа и атак.